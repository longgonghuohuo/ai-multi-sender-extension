# AI Multi Sender v2.0 测试指南

## 📋 测试前准备

### 1. 重新加载插件

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 找到 "AI Multi Sender"
4. 点击 🔄 **重新加载** 按钮
5. 确认版本号显示为 **2.0**

### 2. 打开插件界面

- 点击浏览器工具栏中的 AI Multi Sender 图标
- 应该会打开一个全屏页面（simple.html）

---

## ✅ 测试清单

### 测试 1: UI 界面检查

**预期结果**:
- [ ] 紫色渐变背景
- [ ] 标题显示 "AI Multi Sender"
- [ ] 有一个大的输入框
- [ ] 三个主按钮：
  - [ ] 🪟 并排窗口（粉红色渐变）
  - [ ] 📑 新标签页（紫色渐变）
  - [ ] 🗑️ 清空（灰色）
- [ ] 两个快捷操作按钮：
  - [ ] 📂 先打开AI
  - [ ] ❌ 关闭所有窗口
- [ ] 底部有 "📝 历史提问" 区域
- [ ] 历史区域有 "📥 导出" 和 "🗑️ 清空" 按钮

**如何测试**:
- 打开插件，目视检查 UI 元素

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 2: 并排窗口功能（核心功能）

**步骤**:
1. 在输入框输入测试问题：`什么是人工智能？`
2. 点击 "🪟 并排窗口" 按钮
3. 观察屏幕

**预期结果**:
- [ ] 出现 Toast 提示："🪟 正在创建并排窗口..."
- [ ] 创建 3 个新窗口，从左到右依次是：
  - [ ] ChatGPT (左侧 1/3 屏幕)
  - [ ] Gemini (中间 1/3 屏幕)
  - [ ] Claude (右侧 1/3 屏幕)
- [ ] 每个窗口高度占满整个屏幕
- [ ] 等待 1.5 秒后，问题自动填充到各窗口的输入框
- [ ] Toast 提示："✅ 三个窗口已创建并排列！"
- [ ] 问题被保存到历史记录

**如何验证问题是否填充**:
- 手动检查每个窗口的输入框
- ChatGPT: 底部输入框应该有 "什么是人工智能？"
- Gemini: 底部输入框应该有 "什么是人工智能？"
- Claude: 底部输入框应该有 "什么是人工智能？"

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

**备注**:
- 如果问题未自动填充，等待更长时间（网络慢的情况下可能需要 3-5 秒）
- 如果仍然失败，手动复制粘贴问题

---

### 测试 3: 关闭所有窗口功能

**前提**: 已完成测试 2，有 3 个并排窗口打开

**步骤**:
1. 回到插件主界面
2. 点击 "❌ 关闭所有窗口" 按钮

**预期结果**:
- [ ] 所有 3 个 AI 窗口被关闭
- [ ] Toast 提示："✅ 已关闭 3 个窗口"

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 4: 历史记录保存

**步骤**:
1. 清空输入框
2. 输入新问题：`Python 和 JavaScript 有什么区别？`
3. 点击 "🪟 并排窗口"
4. 滚动到页面底部查看 "📝 历史提问" 区域

**预期结果**:
- [ ] 历史记录区域显示刚才的问题
- [ ] 显示时间戳（例如：2025-12-22 15:30:00）
- [ ] 显示模式标记：🪟 并排窗口
- [ ] 完整的问题文本

**重复步骤**:
- 再发送 2-3 个不同的问题
- 确认所有问题都被保存
- 最新的问题应该在最上面

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 5: 点击历史记录填充

**前提**: 已有至少 2 条历史记录

**步骤**:
1. 清空输入框
2. 点击历史记录列表中的任意一条记录

**预期结果**:
- [ ] 点击的问题自动填充到输入框
- [ ] Toast 提示："✅ 已填充历史问题"
- [ ] 输入框获得焦点

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 6: 导出历史记录

**前提**: 已有至少 3 条历史记录

**步骤**:
1. 点击历史记录区域的 "📥 导出" 按钮
2. 检查浏览器的下载目录

**预期结果**:
- [ ] Toast 提示："✅ 历史记录已导出"
- [ ] 下载一个 Markdown 文件
- [ ] 文件名格式：`AI提问历史_2025-12-22.md`
- [ ] 打开文件，检查内容格式：
  ```markdown
  # AI Multi Sender - 历史提问记录

  **导出时间**: 2025-12-22 15:30:00
  **总计问题**: 3 条

  ---

  ## 1. 2025-12-22 15:30:00

  **模式**: 🪟 并排窗口

  **问题**:
  什么是人工智能？

  ---
  ```

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 7: 清空历史记录

**前提**: 已有历史记录

**步骤**:
1. 点击历史记录区域的 "🗑️ 清空" 按钮
2. 在弹出的确认对话框中点击 "确定"

**预期结果**:
- [ ] 弹出确认对话框："确定要清空所有历史记录吗？此操作不可恢复！"
- [ ] 点击确定后，所有历史记录被清空
- [ ] 历史记录区域显示："暂无历史记录"
- [ ] Toast 提示："✅ 历史记录已清空"

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 8: 新标签页模式（传统模式）

**步骤**:
1. 输入问题：`如何学习 React？`
2. 先点击 "📂 先打开AI" 按钮（等待 3 个标签页打开）
3. 然后点击 "📑 新标签页" 按钮

**预期结果**:
- [ ] 问题填充到已打开的 ChatGPT 标签页
- [ ] 问题填充到已打开的 Claude 标签页
- [ ] 问题填充到已打开的 Gemini 标签页
- [ ] Toast 提示成功发送的数量

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 9: 快捷键功能

**步骤**:
1. 在输入框输入问题
2. 按 `Ctrl` + `Enter`（Mac 上是 `Cmd` + `Enter`）

**预期结果**:
- [ ] 问题被发送（与点击"新标签页"按钮效果相同）

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

### 测试 10: 数据持久化

**步骤**:
1. 输入一个问题但不发送
2. 关闭插件窗口
3. 重新打开插件

**预期结果**:
- [ ] 输入框中的内容被恢复
- [ ] 历史记录仍然存在

**状态**: ⬜ 未测试 / ✅ 通过 / ❌ 失败

---

## 🐛 常见问题排查

### 问题 1: 点击"并排窗口"后没有创建窗口

**检查步骤**:
1. 打开 Chrome DevTools (F12)
2. 查看 Console 是否有错误
3. 检查是否有权限提示被阻止

**可能原因**:
- 浏览器阻止了弹出窗口
- 权限未正确配置

**解决方案**:
- 允许插件创建弹出窗口
- 重新加载插件

---

### 问题 2: 窗口创建了但问题没有填充

**检查步骤**:
1. 手动检查每个窗口的输入框
2. 等待 3-5 秒（网络延迟）
3. 打开 DevTools 查看 Console 日志

**可能原因**:
- 页面加载速度慢
- Content Script 注入失败
- AI 网站更新了 DOM 结构

**解决方案**:
- 等待更长时间
- 手动复制粘贴问题
- 检查 Content Scripts 的选择器是否需要更新

---

### 问题 3: 历史记录不显示

**检查步骤**:
1. 打开 DevTools
2. 转到 Application → Storage → Local Storage
3. 查找 chrome-extension://... 下的 `history` 键

**可能原因**:
- Storage API 未正确保存
- JavaScript 错误阻止了保存

**解决方案**:
- 检查 Console 错误日志
- 手动清空 Storage 后重试

---

## 📊 测试结果总结

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 1. UI 界面检查 | ⬜ | |
| 2. 并排窗口功能 | ⬜ | |
| 3. 关闭所有窗口 | ⬜ | |
| 4. 历史记录保存 | ⬜ | |
| 5. 点击历史填充 | ⬜ | |
| 6. 导出历史记录 | ⬜ | |
| 7. 清空历史记录 | ⬜ | |
| 8. 新标签页模式 | ⬜ | |
| 9. 快捷键功能 | ⬜ | |
| 10. 数据持久化 | ⬜ | |

**总体评分**: __ / 10

---

## 🎯 测试完成后

如果所有测试通过：
✅ 可以进入发布准备阶段
✅ 准备商店素材（图标、截图、描述）
✅ 创建隐私政策文档

如果有测试失败：
❌ 记录失败的测试项和错误信息
❌ 提供 Console 截图或日志
❌ 我会帮你修复问题

---

**测试日期**: ___________
**测试人**: ___________
**测试浏览器**: Chrome _____ / Edge _____
**操作系统**: macOS / Windows / Linux
